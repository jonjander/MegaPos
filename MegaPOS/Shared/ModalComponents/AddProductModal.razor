@if (model != null)
{
<Modal @ref="modalRef">
    <ModalContent IsCentered="true">
        <ModalHeader>
            <ModalTitle>Add new product</ModalTitle>
            <CloseButton />
        </ModalHeader>
        <ModalBody>
            <Field>
                <FieldLabel>Name</FieldLabel>
                <TextEdit Placeholder="Name"
                          @bind-Text="model.Name" />
            </Field>
            <Field>
                <FieldLabel>Price</FieldLabel>
                <NumericEdit @bind-Value="@model.Price"
                             Placeholder="Price" />
            </Field>
            <Field>
                <FieldLabel>Quantity</FieldLabel>
                <NumericEdit @bind-Value="@model.Quantity"
                             Placeholder="Quantity" />
            </Field>
            <Field>
                <FieldLabel>Local profit</FieldLabel>
                <NumericEdit @bind-Value="@model.LocalProfit"
                             Placeholder="Local profit" />
            </Field>
        </ModalBody>
        <ModalFooter>
            <Button Color="Color.Secondary" Clicked="@HideModal">Close</Button>
            <Button Color="Color.Primary" Clicked="@HideModal">Add product</Button>
        </ModalFooter>
    </ModalContent>
</Modal>
}
@code{
    [Parameter] public EventCallback<NewProductCommand> OnAddProduct { get; set; }
    [Parameter] public string StoreId { get; set; }

    private Modal modalRef;
    private NewProductCommand model;

    protected override void OnInitialized()
    {
        model = new NewProductCommand(StoreId);
    }

    public void ShowModal()
    {
        model = new NewProductCommand(StoreId);

        modalRef.Show();
    }

    public async Task HideModal()
    {
        if (model.IsValid()) {
            await OnAddProduct.InvokeAsync(model);
            
            modalRef.Hide();
        }

    }
}
